# Story 5.2: Incremental Domain Addition

**Epic:** Epic 5 - VPS Deployment Scenarios and Operations
**Priority:** Must-have

## Description

Adding domains to an already-configured VPS over time.

## Acceptance Criteria

- [ ] VPS already has domain A configured
- [ ] New project repo with domain B
- [ ] Copy `setup-vps.sh` and `.env.deploy` to new repo
- [ ] Configure `.env.deploy` for domain B
- [ ] Run `./setup-vps.sh` from new repo
- [ ] Domain B added to registry
- [ ] Caddyfile regenerated with both A and B
- [ ] Caddy reloaded
- [ ] No impact on domain A
- [ ] Can repeat for domains C, D, etc.

## Dependencies

Story 5.1

## Testing Notes

```bash
# Domain A already configured on VPS
# From new project repo for domain B:

# Copy scripts
cp /path/to/vpsdeploy/setup-vps.sh .
cp /path/to/vpsdeploy/.env.deploy.example .env.deploy
# Edit .env.deploy with domain B details

./setup-vps.sh --dry-run --verbose
# Should show registry merge

./setup-vps.sh
# Should add domain B, regenerate Caddyfile, reload Caddy

# Verify both domains in registry
ssh deploy@vps "sudo jq '.domains | keys' /etc/caddy/domains.json"

# Verify domain A still works
curl -I https://domain-a.com
```
