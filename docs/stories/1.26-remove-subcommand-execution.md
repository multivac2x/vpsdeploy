# Story 1.26: Remove Subcommand - Execution

**Epic:** Epic 1 - setup-vps.sh Core Functionality Testing
**Priority:** Must-have

## Description

Verify removal actually removes domain and cleans up.

## Acceptance Criteria

- [x] Domain is removed from `/etc/caddy/domains.json`
- [x] If dynamic: PM2 process is stopped and deleted (`pm2 delete ${DOMAIN}`)
- [x] Caddyfile is regenerated from remaining registry entries
- [x] Caddy is reloaded with new config
- [x] `pm2 save` is executed
- [x] Reminder printed: "Files at /var/www/${DOMAIN} (or /home/deploy/apps/${DOMAIN}) were NOT deleted. Remove manually if desired."
- [x] Domain no longer accessible via HTTPS

## Dependencies

Story 1.25 (confirmed removal)

## Testing Notes

```bash
# Confirm removal
./setup-vps.sh remove
# Answer 'y' to prompt

# Check registry
ssh deploy@vps "sudo cat /etc/caddy/domains.json" | jq '.domains | keys'
# Should NOT include removed domain

# Check Caddyfile
ssh deploy@vps "sudo cat /etc/caddy/Caddyfile" | grep removed-domain.com
# Should not appear

# Check PM2 (if dynamic)
ssh deploy@vps "pm2 list | grep removed-domain.com"
# Should not appear

# Try accessing https://removed-domain.com
# Should not resolve (404 or connection error)
```
