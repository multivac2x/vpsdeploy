# Story 5.4: Caddyfile Backup Rotation

**Epic:** Epic 5 - VPS Deployment Scenarios and Operations
**Priority:** Should-have

## Description

Verify backup strategy for Caddyfile.

## Acceptance Criteria

- [x] Each regeneration creates timestamped backup in `/etc/caddy/backups/`
- [x] Backup format: `Caddyfile.YYYYMMDD_HHMMSS`
- [x] Old backups are NOT automatically pruned (manual cleanup)
- [x] Can manually restore from any backup
- [x] Disk space impact is minimal (text files)

## Dependencies

Story 1.17

## Testing Notes

```bash
# Run setup-vps.sh multiple times
./setup-vps.sh
./setup-vps.sh
./setup-vps.sh

# Check backups
ssh deploy@vps "ls -l /etc/caddy/backups/"
# Should show multiple timestamped backups

# Count total size
ssh deploy@vps "du -sh /etc/caddy/backups/"
# Should be small (KB range)

# Manual restore test
ssh deploy@vps "sudo cp /etc/caddy/backups/Caddyfile.20250217_100000 /etc/caddy/Caddyfile"
ssh deploy@vps "sudo caddy validate && sudo systemctl reload caddy"
```
