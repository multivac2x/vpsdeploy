# Story 5.8: Rolling Back to Previous Configuration

**Epic:** Epic 5 - VPS Deployment Scenarios and Operations
**Priority:** Should-have

## Description

Verify manual rollback procedure using Caddyfile backups.

## Acceptance Criteria

- [x] Current Caddyfile is `/etc/caddy/Caddyfile`
- [x] List backups in `/etc/caddy/backups/`
- [x] Choose backup: `sudo cp /etc/caddy/backups/Caddyfile.20250217_100000 /etc/caddy/Caddyfile`
- [x] Validate: `sudo caddy validate`
- [x] Reload: `sudo systemctl reload caddy`
- [x] Previous domain configuration restored
- [x] Document this as manual recovery procedure

## Dependencies

Story 1.17

## Testing Notes

```bash
# 1. List available backups
ssh deploy@vps "ls /etc/caddy/backups/"

# 2. Choose a backup (e.g., before a problematic change)
ssh deploy@vps "sudo cp /etc/caddy/backups/Caddyfile.20250217_100000 /etc/caddy/Caddyfile"

# 3. Validate
ssh deploy@vps "sudo caddy validate"
# Should output: "Valid"

# 4. Reload
ssh deploy@vps "sudo systemctl reload caddy"

# 5. Verify previous configuration is active
ssh deploy@vps "sudo cat /etc/caddy/Caddyfile" | head -20

# 6. Test domains that were in that backup
curl -I https://old-domain.com
```
