# Story 4.5: Domain with Subdomains

**Epic:** Epic 4 - Error Handling and Edge Cases
**Priority:** Should-have

## Description

Verify handling of subdomain configurations (e.g., `app.example.com`).

## Acceptance Criteria

- [ ] `.env.deploy` with `DOMAIN=app.example.com`
- [ ] `setup-vps.sh` creates registry entry with full subdomain
- [ ] Caddyfile includes both `www.app.example.com` redirect and `app.example.com` block
- [ ] Directory paths use full domain: `/var/www/app.example.com/`
- [ ] Log file: `/var/log/caddy/app.example.com.log`
- [ ] Deploy and access works via `https://app.example.com`

## Dependencies

Stories 3.1, 3.2

## Testing Notes

```bash
cat > .env.deploy << 'EOF'
VPS_USER=deploy
VPS_IP=your.vps.ip
DOMAIN=app.example.com
DOMAIN_TYPE=static
EOF

./setup-vps.sh
./deploy.sh

# Verify Caddyfile
ssh deploy@vps "sudo cat /etc/caddy/Caddyfile" | grep -E "www.app.example.com|app.example.com"

# Verify directory
ssh deploy@vps "ls -ld /var/www/app.example.com"

# Test HTTPS
curl -I https://app.example.com
```
