# Story 1.36: Firewall Configuration - UFW

**Epic:** Epic 1 - setup-vps.sh Core Functionality Testing
**Priority:** Must-have

## Description

Verify UFW firewall is configured with correct rules.

## Acceptance Criteria

- [x] Script checks if UFW is active (`sudo ufw status`)
- [x] Ensures rules exist for ports: 22 (SSH), 80 (HTTP), 443 (HTTPS)
- [x] If rules missing, adds them with `sudo ufw allow <port>/tcp`
- [x] If UFW is inactive, enables it with `sudo ufw --force enable` (after ensuring SSH rule exists to avoid lockout)
- [x] Final status shows rules in order: 22, 80, 443
- [x] Default deny policy is in place (if UFW was fresh)

## Dependencies

Story 1.10 (actual execution)

## Testing Notes

```bash
./setup-vps.sh --dry-run --verbose | grep -E "ufw|allow"

# After actual execution
ssh deploy@vps "sudo ufw status verbose"
# Should show:
#   Status: active
#   Logging: on (low)
#   Default: deny (incoming), allow (outgoing), disabled (routed)
#   New profiles: skip
#
#   To                         Action      From
#   --                         ------      ----
#   22/tcp                     ALLOW IN    Anywhere
#   80/tcp                     ALLOW IN    Anywhere
#   443/tcp                    ALLOW IN    Anywhere
```
