# Story 2.5: Deploy Phase - Dynamic Site Rsync

**Epic:** Epic 2 - deploy.sh Core Functionality Testing
**Priority:** Must-have

## Description

Verify dynamic site code is rsynced with proper exclusions.

## Acceptance Criteria

- [ ] Target path: `${VPS_APPS_PATH}/${DOMAIN}/` (default: `/home/deploy/apps/example.com/`)
- [ ] Rsync command: `rsync -az --delete --exclude='node_modules' --exclude='.next/cache' ./ ${VPS_USER}@${VPS_IP}:${VPS_APPS_PATH}/${DOMAIN}/`
- [ ] Entire project directory (excluding specified patterns) is transferred
- [ ] Exclusions prevent unnecessary files from being copied
- [ ] SSH connection tested, remote directory created

## Dependencies

Stories 2.2, 2.3

## Testing Notes

```bash
cat > .env.deploy << 'EOF'
VPS_USER=deploy
VPS_IP=your.vps.ip
DOMAIN=example.com
DOMAIN_TYPE=dynamic
DOMAIN_PORT=3000
EOF

./deploy.sh --dry-run --verbose 2>&1 | grep "rsync"
# Should show: rsync -az --delete --exclude='node_modules' --exclude='.next/cache' --dry-run -e "ssh -p 22" ./ deploy@your.vps.ip:/home/deploy/apps/example.com/
```
