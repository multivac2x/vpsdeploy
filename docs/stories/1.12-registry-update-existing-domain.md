# Story 1.12: Registry Update - Existing Domain

**Epic:** Epic 1 - setup-vps.sh Core Functionality Testing
**Priority:** Must-have

## Description

Verify that re-running with same domain updates its configuration.

## Acceptance Criteria

- [x] Domain exists in registry
- [x] Change `DOMAIN_TYPE` or `DOMAIN_PORT` in `.env.deploy`
- [x] Run `setup-vps.sh` again
- [x] Domain entry is updated with new values
- [x] `added_at` remains unchanged
- [x] `updated_at` is refreshed
- [x] Other domains in registry unaffected

## Dependencies

Story 1.10

## Testing Notes

```bash
# Domain already exists as static
cat > .env.deploy << 'EOF'
VPS_USER=deploy
VPS_IP=your.vps.ip
DOMAIN=example.com
DOMAIN_TYPE=dynamic
DOMAIN_PORT=3000
EOF

./setup-vps.sh

# Check registry
ssh deploy@vps "sudo jq '.domains[\"example.com\"]' /etc/caddy/domains.json"

# Should show:
# {
#   "type": "dynamic",
#   "port": 3000,
#   "app_dir": "/home/deploy/apps/example.com",
#   "added_at": "original-timestamp",
#   "updated_at": "new-timestamp"
# }

# added_at should be the original value
# updated_at should be newer
```
