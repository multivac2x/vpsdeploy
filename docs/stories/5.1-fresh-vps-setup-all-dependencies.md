# Story 5.1: Fresh VPS Setup - All Dependencies

**Epic:** Epic 5 - VPS Deployment Scenarios and Operations
**Priority:** Must-have

## Description

Complete provisioning of a brand-new VPS with no prior configuration.

## Acceptance Criteria

- [x] Ubuntu 22.04 or 24.04 freshly created
- [x] Non-root user `deploy` exists with sudo
- [x] SSH key authentication set up
- [x] No Caddy, Node.js, PM2, jq installed
- [x] Run `./setup-vps.sh` with static domain
- [x] All software installed: Caddy, jq
- [x] UFW configured with 22, 80, 443
- [x] Directory structure created
- [x] Registry and Caddyfile generated
- [x] Caddy running and serving domain (after DNS and deploy)
- [x] Total time: < 10 minutes

## Dependencies

All setup-vps.sh stories

## Testing Notes

This is a comprehensive end-to-end test on a fresh VPS.

```bash
# 1. Create fresh Ubuntu 22.04/24.04 VPS
# 2. Create deploy user with sudo
# 3. Setup SSH key authentication
# 4. Ensure no Caddy, Node.js, PM2, jq installed
# 5. From project repo, configure .env.deploy
# 6. Run: time ./setup-vps.sh
# 7. Verify total time < 10 minutes
# 8. Verify all software installed
# 9. Verify UFW rules
# 10. Verify directories created
# 11. Verify registry and Caddyfile
# 12. Run deploy.sh
# 13. Verify site accessible via HTTPS
```
