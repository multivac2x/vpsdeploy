# Story 1.11: Registry Merge - Adding Second Domain

**Epic:** Epic 1 - setup-vps.sh Core Functionality Testing
**Priority:** Must-have

## Description

Verify that adding a domain from a different repo merges correctly into existing registry.

## Acceptance Criteria

- [x] First domain exists in registry
- [x] Running `setup-vps.sh` with different `DOMAIN` adds new entry
- [x] Original domain remains unchanged in registry
- [x] Both domains present after merge
- [x] `added_at` of first domain preserved, only `updated_at` changed

## Dependencies

Story 1.10

## Testing Notes

```bash
# First domain already in registry
# Then from another repo:
cat > .env.deploy << 'EOF'
VPS_USER=deploy
VPS_IP=your.vps.ip
DOMAIN=second-domain.com
DOMAIN_TYPE=static
EOF

./setup-vps.sh --dry-run  # Or actual execution

# Check registry contains both domains
ssh deploy@vps "sudo jq '.domains | keys' /etc/caddy/domains.json"
# Should output: ["first-domain.com", "second-domain.com"]

# Verify added_at of first domain unchanged
ssh deploy@vps "sudo jq '.domains[\"first-domain.com\"].added_at' /etc/caddy/domains.json"
```
