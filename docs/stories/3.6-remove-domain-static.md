# Story 3.6: Remove Domain - Static

**Epic:** Epic 3 - Integration and End-to-End Testing
**Priority:** Must-have

## Description

Verify complete removal of static domain.

## Acceptance Criteria

- [ ] Static domain exists and working
- [ ] Run `./setup-vps.sh remove` and confirm
- [ ] Domain removed from registry
- [ ] Caddyfile regenerated without domain
- [ ] Caddy reloaded
- [ ] `https://example.com` no longer resolves (connection refused or 404 from default Caddy)
- [ ] Files remain in `/var/www/example.com/` (as documented)
- [ ] `setup-vps.sh status` no longer shows domain

## Dependencies

Stories 3.1, 1.26

## Testing Notes

```bash
# 1. Ensure static domain is configured and working
./setup-vps.sh status
# Should show domain

# 2. Remove domain
./setup-vps.sh remove
# Answer 'y' to confirmation

# 3. Check registry
ssh deploy@vps "sudo cat /etc/caddy/domains.json" | jq '.domains | keys'
# Should NOT include removed domain

# 4. Check Caddyfile
ssh deploy@vps "sudo cat /etc/caddy/Caddyfile" | grep "example.com"
# Should not appear

# 5. Test HTTPS
curl -I https://example.com
# Should return error (404 or connection refused)

# 6. Check files still exist
ssh deploy@vps "ls -ld /var/www/example.com"
# Should still exist

# 7. Status command
./setup-vps.sh status
# Should not show removed domain
```
